const N=["click","input","value"],z=Object,I=Array,j=I.isArray,nn=Map,V=Int32Array,tn=queueMicrotask,b=Node.prototype,x=Element.prototype,G=document,J=G.createElement("template"),ln=J.content,en=G.createElement("template");en.content.firstChild;const P=b.insertBefore,Q=b.removeChild,sn=b.cloneNode,on=x.setAttribute,cn=x.removeAttribute,fn=x.addEventListener,rn=x.removeEventListener,M=(n,t)=>z.getOwnPropertyDescriptor(n,t),B=M(b,"firstChild").get;M(b,"lastChild").get;const q=M(b,"nextSibling").get;M(b,"previousSibling").get;const H=M(b,"textContent").set;M(b,"nodeType").get;const pn=M(x,"innerHTML").set,K=M(x,"className").set,$=M(HTMLElement.prototype,"style").get,U=M(SVGElement.prototype,"style").get,g=z.seal({p:null,n:null,si:0,e:[]}),R=(n,t,l,e,s)=>({f:n,v:t,c:l,p:e,s1:s}),W=()=>{const n=g.e;if(n.length>0){g.e=[];for(let t=0;t<n.length;t++)n[t]()}},Y=(n,t,l,e,s,c,f)=>{let o;for(let p=0;p<t.length;p++){const h=t[p],a=h&7,y=h>>9;if(a===0)n=e[y],o=void 0;else{const u=h>>3&63,i=c[u];if(a===4){const r=l[y];s===null?i!==void 0&&(n[r]=i):n[r]!==i&&(n[r]=i)}else{let r;if(s!==null&&(r=s[u]),r!==i)if(a===1)y===0?i!==""&&i!=null&&i!==!1?K.call(n,i):r!==""&&r!=null&&r!==!1&&K.call(n,""):y===1?i!==""&&i!=null&&i!==!1?r==null||r===""||r===!1?H.call(n,i):B.call(n).nodeValue=i:r!=null&&r!==""&&r!==!1&&H.call(n,""):i!==""&&i!=null&&i!==!1?pn.call(n,i):r!==""&&r!=null&&r!==!1&&H.call(n,"");else if(a===7)i(n);else{const d=l[y];a===2?i!==!1&&i!=null?on.call(n,d,i):r!==!1&&r!=null&&cn.call(n,d):a===3?n[d]=i:a===5?i!==!1&&i!=null?(o===void 0&&(o=f===!1?$.call(n):U.call(n)),o.setProperty(d,i)):r!==!1&&r!=null&&(o===void 0&&(o=f===!1?$.call(n):U.call(n)),o.removeProperty(d)):(r!=null&&r!==!1&&rn.call(n,d,r),i!=null&&i!==!1&&fn.call(n,d,i))}}}}},Z=(n,t,l,e,s)=>{const c=g;for(;;){const f=t[l++];if(f&1&&(s[++c.si]=n),f&2){const o=f>>3;if(o)Z(B.call(n),t,l,l+=o,s);else{const p=n;s[++c.si]=n=q.call(n),p.remove()}}if(l===e)return;n=q.call(n)}},X=(n,t,l,e)=>{let s=l.length;const c=I(s),f=R(t,e,c,n,null);for(;s>0;)c[--s]=w(f,l[s]);return f},un=(n,t,l,e)=>{if(!j(l))return L(t,!0),w(n,l);const s=t.c;let c=s,f=s.length,o=l.length;if(o!==f){for(t.c=c=I(o);f>o;){const p=s[--f];p!==null&&L(p,!0)}for(;o>f;)c[--o]=w(t,l[o])}for(;o>0;)c[--o]=O(t,s[o],l[o],e);return t},O=(n,t,l,e)=>{if(t===null)return w(n,l);if(l===!1||l==null||l==="")return L(t,!0),null;const s=t.c,c=t.v,f=t.s1,o=t.f,p=o&127;if(t.f=p,t.v=l,p===16){const u=g;return typeof l!="object"?(c!==l&&(f.nodeValue=l),e&1024&&P.call(u.p,f,u.n),u.n=f,t):(Q.call(u.p,f),w(n,l))}if(c===l)return D(t,e),t;if(t.f=p,p===8)return un(n,t,l,e);const h=l.d,a=l.p,y=c.p;if(c.d!==h)return L(t,!0),w(n,l);if(p===2)(o|e)&640||h.p2===void 0||h.p2(y,a)!==!0?t.c=O(t,s,f(a),e):s!==null&&D(s,e);else if(p===1){const u=g,i=u.p,r=h.p1,d=r.f,m=r.d,v=r.p,_=r.c,C=f[0];if(e&1024&&(e^=1024,P.call(i,C,u.n)),Y(C,v,m,f,y,a,!!(d&4096)),s!==null){u.p=C,u.n=null;let T=0;for(let A=0;A<_.length;A++){const S=_[A],E=S&3,k=S>>2;E===0?s[T]=O(t,s[T++],a[k],e):E===1?u.n=f[k]:(u.p=f[k],u.n=null)}u.p=i}u.n=C}else p===4?hn(t,y,a,e):(y.v!==a.v&&(e|=512),t.c=O(t,s,a.c,e));return t},w=(n,t)=>{if(t!==!1&&t!=null){if(typeof t=="object"){if(j(t))return X(n,8,t,t);{const l=t.d,e=t.p,s=l.p1,c=l.f&7;if(c===1){const o=g,p=o.p,h=o.n,a=s,y=a.d,u=a.p,i=a.s,r=a.c,d=a.f,m=l.p2(),v=I(d&63);v[0]=m,i.length>0&&(o.si=0,Z(B.call(m),i,0,i.length,v)),Y(m,u,y,v,null,e,!!(d&4096));const _=R(1,t,null,n,v);if(r.length>0){const C=I(d>>6&63);_.c=C,o.p=m,o.n=null;let T=0;for(let A=0;A<r.length;A++){const S=r[A],E=S&3,k=S>>2;E===0?C[T++]=w(_,e[k]):E===1?o.n=v[k]:(o.p=v[k],o.n=null)}o.p=p}return o.n=m,P.call(p,m,h),_}else if(c===2){const o={f:2,v:t,c:null,p:n,s1:null,s2:null},p=s(o);return o.c=w(o,p(e)),o.s1=p,o}else if(c===4)return X(n,4,e.v,t);const f=R(64,t,null,n,null);return f.c=w(f,e.c),f}}else if(t!==""){const l=g,e=l.n,s=G.createTextNode(t);return l.n=s,P.call(l.p,s,e),R(16,t,null,n,s)}}return null},D=(n,t)=>{const l=g,e=n.s1,s=n.v,c=n.c,f=n.f,o=f&127;if(n.f=o,o===1){const p=e[0];if(t&1024&&(t^=1024,P.call(l.p,p,l.n)),f&256){l.p=p,l.n=null;const h=l.p,a=s.d.p1.c;let y=0;for(let u=0;u<a.length;u++){const i=a[u],r=i&3,d=i>>2;if(r===0){const m=c[y++];m!==null&&D(m,t)}else r===1?l.n=e[d]:(l.p=e[d],l.n=null)}l.p=h}l.n=p}else if(o===16)t&1024&&P.call(l.p,e,l.n),l.n=e;else if(o===2)(f|t)&640?n.c=O(n,c,e(s.p),t):c!==null&&D(c,t);else if(o===64)c!==null&&D(c,t);else{let p=c.length;for(;--p>=0;){const h=c[p];h!==null&&D(h,t)}}},L=(n,t)=>{const l=n.f,e=n.c;if(t===!0&&l&17&&(t=!1,Q.call(g.p,l&1?n.s1[0]:n.s1)),l&2){const s=n.s2;if(s!==null)if(typeof s=="function")s();else for(let c=0;c<s.length;c++)s[c]()}if(e!==null)if(j(e))for(let s=0;s<e.length;s++){const c=e[s];c!==null&&L(c,t)}else L(e,t)},hn=(n,t,l,e)=>{const s=t.k,c=l.k,f=l.v;let o=c.length,p=s.length;const h=I(o);if(o===0)p>0&&L(n,!0);else if(p===0)for(;o>0;)h[--o]=w(n,f[o]);else{const a=n.c;let y=p-1,u=o-1,i=0;n:for(;;){for(;s[y]===c[u];)if(h[u]=O(n,a[y--],f[u],e),i>--u||i>y)break n;for(;s[i]===c[i]&&++i<=y&&i<=u;);break}if(i>y)for(;u>=i;)h[u]=w(n,f[u--]);else if(i>u){o=i;do{const r=a[o++];r!==null&&L(r,!0)}while(o<=y)}else{let r=u-i+1;const d=new V(r),m=new nn;for(let _=0;_<r;_++){d[_]=-1;const C=i+_;m.set(c[C],C)}let v=0;for(let _=i;_<=y;_++){const C=a[_],T=m.get(s[_]);T!==void 0?(v=v<T?T:1073741823,d[T-i]=_,h[T]=C):C!==null&&L(C,!0)}for(!(e&1024)&&v===1073741823&&an(d);r-- >0;){u=r+i;const _=f[u],C=d[r];h[u]=C===-1?w(n,_):O(n,h[u],_,e|(v===1073741823&&C!==-2?1024:0))}}for(;i>0;)h[--i]=O(n,a[i],f[i],e)}n.c=h},an=n=>{const t=n.length,l=new V(t),e=new V(t);let s=0,c=0,f,o,p,h;for(;n[c]===-1;c++);for(e[0]=c++;c<t;c++)if(o=n[c],o!==-1)if(f=e[s],n[f]<o)l[c]=f,e[++s]=c;else{for(p=0,h=s;p<h;)f=p+h>>1,n[e[f]]<o?p=f+1:h=f;o<n[e[p]]&&(p>0&&(l[c]=e[p-1]),e[p]=c)}for(f=e[s];s-->=0;)n[f]=-2,f=l[f]},vn=n=>()=>(typeof n=="string"&&(J.innerHTML=n,n=ln.firstChild),sn.call(n,!0)),gn=(n,t,l,e,s)=>({f:1,p1:{f:t,p:l,c:e,s,d:N},p2:n}),wn=(n,t)=>({d:n,p:t}),Tn=(n,t)=>{const l={f:2,p1:n,p2:t};return e=>({d:l,p:e})},yn=n=>{if(!(n.f&128)){n.f|=128;let t=n,l=n.p;for(;l!==null;){if(l.f&256)return;t=l,l.f|=256,l=l.p}t.v.d.p1(t,t.s1)}},F=(n,t)=>{for(;(t|n.f)&768;){const l=g,{p:e,n:s}=l;if(n.f=32,n.c!==null){const c=n.v.p;g.p=c.p,g.n=c.n,D(n.c,t),t=0,W()}l.p=e,l.n=s}},dn=(n,t,l)=>{const e=g,{p:s,n:c}=e,f=n.v.p;e.p=f.p,e.n=f.n,n.f=32,n.c=O(n,n.c,t,l),W(),e.p=s,e.n=c,F(n,0)},_n=n=>{var t={f:32,p1:n,p2:null};return(l,e=null,s)=>R(32,{d:t,p:{p:l,n:e}},null,null,s)},Cn=_n(n=>{tn(()=>{F(n,0)})}),mn=(n,t,l)=>{dn(n,t,0)},Mn=(n,t)=>[()=>t,l=>{l!==t&&(t=l,yn(n))}];function On(n,t){const l=document.getElementById(t);if(l){console.log(`Mounting island: ${t}`);const e=Cn(l);mn(e,n())}else console.warn(`Element not found for island: ${t}`)}export{wn as _,gn as a,vn as b,Tn as c,On as m,Mn as u};
